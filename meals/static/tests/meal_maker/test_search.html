<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Meal Maker Serach Javascript Tests</title>
	<link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-2.4.1.css">
	<script src="https://code.jquery.com/qunit/qunit-2.4.1.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="../../meals/js/meal_maker.js"></script>
    <script>

		var test_macro_bars_creation = function(assert,svg_target_tag,bar_target_tag) {

			var svg = $('#' + svg_target_tag + '-svg'),
			bar_width = (svg.width() - (svg.width() * .1)) / 4.0,
			cal_bar = d3.select('#' + bar_target_tag + '-cals-bar'),
			fat_bar = d3.select('#' + bar_target_tag + '-fat-bar'),
			carbs_bar = d3.select('#' + bar_target_tag + '-carbs-bar'),
			protein_bar = d3.select('#' + bar_target_tag + '-protein-bar');

			assert.equal(cal_bar.attr('width'),bar_width);
			assert.equal(fat_bar.attr('width'),bar_width);
			assert.equal(carbs_bar.attr('width'),bar_width);
			assert.equal(protein_bar.attr('width'),bar_width);

			assert.equal(cal_bar.attr('height')/svg.height(),.85);
			assert.equal(fat_bar.attr('height')/cal_bar.attr('height'),.3);
			assert.equal(carbs_bar.attr('height')/cal_bar.attr('height'),.4);
			assert.equal(protein_bar.attr('height')/cal_bar.attr('height'),.3);

		};
    </script>
</head>
<body>
	<div id="qunit"></div>
	<div id="qunit-fixture">
		<div id='meal-maker-food-search-container' class='search-area'>
			<span id='meal-maker-food-search-wrapper'>
                <input id='meal-maker-food-search-input' type='text' placeholder='Search For Food'/>
                <button id='food-search-icon-button' class="icon">
                    <i class='glyphicon glyphicon-search'></i>
                </button>
            </span>
		</div>
		
	</div>
	

	<!--end of test mocks-->
	<!------------------------------------------------------------------------------------------------------------------ -->
	<!------------------------------------------------------------------------------------------------------------------ -->
	<!--QUnit TESTS -->
	<script>

		//ingredient bars
		QUnit.test("calling create ingredient bars with add icon button creates the ing bars", function (assert) {
			MM_FUNK.add_search_result_ingredient_button_trigger();
			test_macro_bars_creation(assert,'ingredient-1','ingredient-1');
		});

	</script>
</body>
</html>

