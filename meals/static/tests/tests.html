<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Javascript Tests</title>
	<link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-2.4.1.css">

</head>
<body>
	<div id="qunit"></div>
	<div id="qunit-fixture">
		<!--clear error message on key stroke test-->
		<form>
			<input name="text"/>
			<div class="has-error">Error Text</div>
		</form>
		<!--remove header tests -->
		<ul class="nav nav-tabs">
			<li id='id_tab1_label'><a data-toggle="tab" href="id_tab1">Tab1</a></li>
		</ul>
		<div class="tab-content">
			<div id='id_tab1' class="tab-pane">
				<h1>Tab1</h1>
			<div>
		</div>
		<h1 id="id_home_headline">Meal Lab Home</h1>
		
		<!--switch between metric and imperial height forms and placeholders-->
		<div id='id_height_div'></div>
		<input id='id_weight' type='text' />
		<input id='id_change_rate' type='text' />
			
	</div>
	<script src="https://code.jquery.com/qunit/qunit-2.4.1.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="../meals.js"></script>
	<script>
		//error removal tests
		QUnit.test("errors should be hidden on keypress", function (assert) {
			initialize();
			$('input[type="text"]').trigger('keypress');
			assert.equal($('.has-error').is(':visible'), false);
		});

		QUnit.test("errors aren't hidden if no keypress", function (assert) {
			initialize();
			assert.equal($('.has-error').is(':visible'), true);
		});
		//header removal tests	
		QUnit.test("home header hidden on tab select", function (assert) {
			hide_home_header_on_tab_select();
			$('#id_tab1_label').trigger('click');
			assert.equal($('#id_home_headline').is(':visible'), false);
		});
		
		QUnit.test("home header not hidden if tab not selected", function (assert) {
			hide_home_header_on_tab_select();
			assert.equal($('#id_home_headline').is(':visible'), true);
		});
		//imperial to metric switch
		QUnit.test("imperial metric switch", function(assert) {
			height_input = "<input id='id_height' type='text'>"
			switch_between_imperial_metric(height_input,'metric')
			var weight_placeholder = $('#id_weight').attr('placeholder')
			assert.equal(weight_placeholder,'kg')
			var height_placeholder = $('#id_height').attr('placeholder')
			assert.equal(height_placeholder,'cm')
			var rate_placeholder = $('#id_change_rate').attr('placeholder')
			assert.equal(rate_placeholder,'kg/wk')
		});
		
	</script>
</body>
</html>

